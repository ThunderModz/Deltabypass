local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ThunderZStealerUI"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Main Frame (smaller square)
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 260, 0, 260) -- square
Frame.Position = UDim2.new(0.5, -130, 0.5, -130)
Frame.BackgroundColor3 = Color3.fromRGB(148, 0, 211) -- Violet
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

-- Header
local Header = Instance.new("TextLabel")
Header.Size = UDim2.new(1, -60, 0, 30) 
Header.Position = UDim2.new(0, 30, 0, 0)
Header.BackgroundTransparency = 1
Header.Text = "ThunderXGhostiny"
Header.TextColor3 = Color3.new(1, 1, 1)
Header.Font = Enum.Font.SourceSansBold
Header.TextSize = 18
Header.TextXAlignment = Enum.TextXAlignment.Center
Header.Parent = Frame

-- Close Button (X)
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -30, 0, 0)
CloseBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.new(1, 1, 1)
CloseBtn.Font = Enum.Font.SourceSansBold
CloseBtn.TextSize = 16
CloseBtn.Parent = Frame

CloseBtn.MouseButton1Click:Connect(function()
    Frame.Visible = false
end)

-- Minimize Button (-)
local MinBtn = Instance.new("TextButton")
MinBtn.Size = UDim2.new(0, 30, 0, 30)
MinBtn.Position = UDim2.new(0, 0, 0, 0)
MinBtn.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
MinBtn.Text = "-"
MinBtn.TextColor3 = Color3.new(1, 1, 1)
MinBtn.Font = Enum.Font.SourceSansBold
MinBtn.TextSize = 16
MinBtn.Parent = Frame

local Minimized = false
MinBtn.MouseButton1Click:Connect(function()
    Minimized = not Minimized
    for _, child in ipairs(Frame:GetChildren()) do
        if child ~= Header and child ~= CloseBtn and child ~= MinBtn then
            child.Visible = not Minimized
        end
    end
    Frame.Size = Minimized and UDim2.new(0, 260, 0, 30) or UDim2.new(0, 260, 0, 260)
end)

-- KEY SYSTEM (ThunderOnTop)
local KeyBox = Instance.new("TextBox")
KeyBox.Size = UDim2.new(1, -20, 0, 25)
KeyBox.Position = UDim2.new(0, 10, 0, 40)
KeyBox.PlaceholderText = "Enter Key"
KeyBox.Text = ""
KeyBox.TextSize = 16
KeyBox.Font = Enum.Font.SourceSans
KeyBox.Parent = Frame

local KeyBtn = Instance.new("TextButton")
KeyBtn.Size = UDim2.new(1, -20, 0, 25)
KeyBtn.Position = UDim2.new(0, 10, 0, 70)
KeyBtn.Text = "Verify Key"
KeyBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 100)
KeyBtn.TextColor3 = Color3.new(1, 1, 1)
KeyBtn.Font = Enum.Font.SourceSansBold
KeyBtn.TextSize = 16
KeyBtn.Parent = Frame

-- Username Input (hidden until key is valid)
local UserBox = Instance.new("TextBox")
UserBox.Size = UDim2.new(1, -20, 0, 25)
UserBox.Position = UDim2.new(0, 10, 0, 110)
UserBox.PlaceholderText = "Enter Username"
UserBox.Text = ""
UserBox.TextSize = 16
UserBox.Font = Enum.Font.SourceSans
UserBox.Visible = false
UserBox.Parent = Frame

-- Avatar Display (hidden until key is valid)
local ImageLabel = Instance.new("ImageLabel")
ImageLabel.Size = UDim2.new(0, 100, 0, 100)
ImageLabel.Position = UDim2.new(0.5, -50, 0, 140)
ImageLabel.BackgroundTransparency = 1
ImageLabel.Visible = false
ImageLabel.Parent = Frame

-- STEAL PET Button (hidden until key is valid)
local StealBtn = Instance.new("TextButton")
StealBtn.Size = UDim2.new(1, -20, 0, 25)
StealBtn.Position = UDim2.new(0, 10, 0, 250)
StealBtn.Text = "STEAL PET"
StealBtn.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
StealBtn.TextColor3 = Color3.new(1, 1, 1)
StealBtn.Font = Enum.Font.SourceSansBold
StealBtn.TextSize = 16
StealBtn.Visible = false
StealBtn.Parent = Frame

-- Avatar loader
local function ShowAvatar(name)
    local success, data = pcall(function()
        return Players:GetUserIdFromNameAsync(name)
    end)
    if success and data then
        ImageLabel.Image = "https://www.roblox.com/headshot-thumbnail/image?userId="..data.."&width=100&height=100&format=png"
        ImageLabel.Visible = true
    else
        ImageLabel.Visible = false
    end
end

UserBox.FocusLost:Connect(function(enterPressed)
    if enterPressed and UserBox.Text ~= "" then
        ShowAvatar(UserBox.Text)
    end
end)

-- Key check logic
KeyBtn.MouseButton1Click:Connect(function()
    if KeyBox.Text == "ThunderOnTop" then
        KeyBox.Visible = false
        KeyBtn.Visible = false
        UserBox.Visible = true
        StealBtn.Visible = true
    else
        KeyBox.Text = "‚ùå Wrong Key"
    end
end)

-- Fun Animation when STEAL PET is clicked
StealBtn.MouseButton1Click:Connect(function()
    Frame:TweenSize(UDim2.new(0, 280, 0, 280), "Out", "Bounce", 0.3, true, function()
        Frame:TweenSize(UDim2.new(0, 260, 0, 260), "Out", "Quad", 0.2, true)
    end)
end)
